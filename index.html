<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CleanSwift | Terms & Conditions</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
  <style>
    :root {
      --bg: #f9fafb;
      --card: #ffffff;
      --muted: #4b5563;
      --text: #111827;
      --accent: #22c55e;
      --link: #2563eb;
      --border: #e5e7eb;
      --warning: #dc2626;
    }

    .terms-container {
      max-width: 920px;
      margin: 48px auto;
      padding: 0 20px 80px;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .terms-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      overflow: hidden;
    }

    .terms-header {
      padding: 28px 28px 12px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    }

    .terms-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .terms-brand-logo {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      background: radial-gradient(circle at 30% 30%, var(--accent), #16a34a 60%, #065f46 100%);
      border: 1px solid var(--border);
    }

    .terms-title {
      font-size: 1.8rem;
      margin: 0;
      letter-spacing: 0.2px;
    }

    .terms-subtitle {
      color: var(--muted);
      margin-top: 6px;
      font-size: 0.98rem;
    }

    .terms-meta {
      color: var(--muted);
      font-size: 0.9rem;
      margin-top: 8px;
    }

    .terms-toc {
      padding: 18px 24px;
      border-bottom: 1px solid var(--border);
      background: rgba(0,0,0,0.02);
    }

    .terms-toc-title {
      font-size: 1rem;
      margin: 0 0 10px;
      color: var(--muted);
    }

    .terms-toc-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 10px 20px;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .terms-toc-link {
      color: var(--link);
      text-decoration: none;
    }

    .terms-toc-link:hover {
      text-decoration: underline;
    }

    .terms-main {
      padding: 24px 28px 32px;
    }

    .terms-section {
      padding: 18px 0 6px;
      border-bottom: 1px dashed var(--border);
    }

    .terms-section:last-child {
      border-bottom: none;
    }

    .terms-section-title {
      margin: 0 0 10px;
      font-size: 1.2rem;
    }

    .terms-section-subtitle {
      margin: 0 0 10px;
      font-size: 1rem;
    }

    .terms-text {
      line-height: 1.65;
      color: var(--text);
    }

    .terms-list {
      padding-left: 20px;
      line-height: 1.6;
      color: var(--text);
    }

    .terms-placeholder {
      background: #f3f4f6;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px dashed var(--border);
      color: var(--muted);
      font-size: 0.92rem;
    }

    .terms-notice {
      padding: 12px 14px;
      background: #fef9c3;
      border: 1px solid #fde68a;
      border-radius: 12-photo
    }

    .terms-muted {
      color: var(--muted);
    }

    .terms-footer {
      padding: 18px 28px 28px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      background: linear-gradient(0deg, rgba(0,0,0,0.02), transparent);
    }

    .terms-btn-top {
      text-decoration: none;
      font-size: 0.95rem;
      color: var(--text);
    }

    .terms-btn-top:hover {
      text-decoration: underline;
    }

    .terms-loading, .terms-error {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
    }

    .terms-error {
      color: var(--warning);
    }

    .terms-faq-item {
      margin-bottom: 16px;
    }

    .terms-faq-question {
      font-size: 1rem;
      font-weight: 500;
      margin: 0 0 8px;
    }

    .terms-about-section {
      margin-top: 16px;
    }

    @media print {
      .terms-container {
        background: #fff;
        color: #000;
      }
      .terms-card, .terms-header, .terms-toc, .terms-footer {
        box-shadow: none;
        background: #fff;
        border: none;
      }
      .terms-toc-link, .terms-btn-top {
        color: #000;
        text-decoration: underline;
      }
      .terms-btn-top {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const TermsAndConditions = () => {
      const [terms, setTerms] = useState(null);
      const [faqs, setFaqs] = useState([]);
      const [about, setAbout] = useState(null);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);

      useEffect(() => {
        const fetchData = async () => {
          try {
            const termsResponse = await axios.get('/getPublishedPolicy?type=terms');
            if (termsResponse.data.success) {
              setTerms(termsResponse.data.data);
            }
            const faqsResponse = await axios.get('/getPublishedFAQs');
            if (faqsResponse.data.success) {
              setFaqs(faqsResponse.data.data.sort((a, b) => a.order - b.order));
            }
            const aboutResponse = await axios.get('/getPublishedAbout');
            if (aboutResponse.data.success) {
              setAbout(aboutResponse.data);
            }
          } catch (err) {
            setError('Failed to load data. Please try again later.');
          } finally {
            setLoading(false);
          }
        };
        fetchData();
      }, []);

      if (loading) {
        return <div className="terms-loading">Loading...</div>;
      }

      if (error) {
        return <div className="terms-error">{error}</div>;
      }

      if (!terms) {
        return <div className="terms-error">No terms data available.</div>;
      }

      return (
        <div className="terms-container">
          <div className="terms-card">
            <header className="terms-header">
              <div className="terms-brand">
                <div className="terms-brand-logo" aria-hidden="true"></div>
                <div>
                  <h1 className="terms-title">CleanSwift – Terms & Conditions</h1>
                  <p className="terms-subtitle">
                    These Terms govern your access to and use of the CleanSwift laundry and dry-cleaning pickup/delivery services and mobile/web apps.
                  </p>
                  <p className="terms-meta">
                    <strong>Effective Date:</strong>{' '}
                    <span>{terms.effectiveDate || 'N/A'}</span> •{' '}
                    <strong>Last Updated:</strong>{' '}
                    <span>{terms.updatedAt?.slice(0, 10) || new Date().toISOString().slice(0, 10)}</span>
                  </p>
                </div>
              </div>
            </header>

            <nav className="terms-toc" aria-label="Table of contents">
              <h2 className="terms-toc-title">Contents</h2>
              <ol className="terms-toc-grid">
                <li><a href="#terms-content" className="terms-toc-link">1. {terms.title}</a></li>
                {faqs.length > 0 && <li><a href="#faqs" className="terms-toc-link">2. Frequently Asked Questions</a></li>}
                {about && <li><a href="#about" className="terms-toc-link">3. {about.data.title}</a></li>}
              </ol>
            </nav>

            <main className="terms-main">
              <p className="terms-notice">
                <strong>Heads-up:</strong> This template is for general informational purposes and is <em>not</em> legal advice. Consult a qualified attorney to tailor these Terms to your business and applicable law.
              </p>

              <section id="terms-content" className="terms-section">
                <h3 className="terms-section-title">{terms.title}</h3>
                <p className="terms-text">{terms.content}</p>
              </section>

              {faqs.length > 0 && (
                <section id="faqs" className="terms-section">
                  <h3 className="terms-section-title">Frequently Asked Questions</h3>
                  {faqs.map((faq) => (
                    <div key={faq.id} className="terms-faq-item">
                      <h4 className="terms-faq-question">{faq.question}</h4>
                      <p className="terms-text">{faq.answer}</p>
                    </div>
                  ))}
                </section>
              )}

              {about && (
                <section id="about" className="terms-section">
                  <h3 className="terms-section-title">{about.data.title}</h3>
                  <p className="terms-text">{about.data.content}</p>
                  {about.data.sections?.map((section) => (
                    <div key={section.id} className="terms-about-section">
                      <h4 className="terms-section-subtitle">{section.title}</h4>
                      <p className="terms-text">{section.content}</p>
                    </div>
                  ))}
                </section>
              )}
            </main>

            <footer className="terms-footer">
              <span className="terms-muted">
                © {new Date().getFullYear()} CleanSwift. All rights reserved.
              </span>
              <a href="#top" className="terms-btn-top" aria-label="Back to top">
                ↑ Back to top
              </a>
            </footer>
          </div>
        </div>
      );
    };

    ReactDOM.render(<TermsAndConditions />, document.getElementById('root'));
  </script>
</body>
</html>
